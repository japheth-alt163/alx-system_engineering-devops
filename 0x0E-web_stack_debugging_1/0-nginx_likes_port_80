#!/usr/bin/env bash
# Script to configure Nginx to listen on port 80

# Install Nginx (if not already installed)
apt-get update
apt-get install -y nginx

# Check if Nginx is already running
if systemctl is-active --quiet nginx; then
  echo "Nginx is already running."
else
  # Start Nginx if not running
  systemctl start nginx
fi

# Check if Nginx is listening on port 80
if ss -tnl | grep -q ':80 '; then
  echo "Nginx is already listening on port 80."
else
  # Configure Nginx to listen on port 80
  sed -i 's/listen 80;/listen 80 default_server;/g' /etc/nginx/sites-available/default
  systemctl restart nginx
fi
